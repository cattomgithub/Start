# workflow name
name: Depoly

# 在main分支上有push命令时触发该流程
on:
    push:
        branches:
            - master

jobs:
    build:
        runs-on: ubuntu-latest
        environment: deploy

        steps:
            - name: Checkout Repository master branch
              uses: actions/checkout@master

            - name: setup oss
              uses: manyuanrong/setup-ossutil@master
              with:
                  endpoint: oss-cn-hongkong.aliyuncs.com
                  access-key-id: ${{ secrets.ACCESS_KEY_ID }} # 刚刚配置过的AccessKeyId
                  access-key-secret: ${{ secrets.ACCESS_KEY_SECRET }} # 刚刚配置过的AccessKeySecret

            - name: copy files to oss
              run: ossutil cp -rf public oss://cattom-start/ # 将xxxxx改为创建的Bucket名称，-rf表示覆盖
